---
title: C4 Model
description: 
published: true
date: 2023-06-29T02:37:09.149Z
tags: c4 model
editor: markdown
dateCreated: 2022-05-06T00:45:59.610Z
---

# 軟體架構之Ｃ4模型
- [ ] [The C4 model for visualising software architecture](https://c4model.com/)
- [ ] [工程師畫圖 | 看懂C4 Model | 比UML更好懂的系統架構圖](https://www.youtube.com/watch?v=rr9OUCC6h2M&ab_channel=Winsome%E5%9C%A8%E5%AD%B8)
- [ ] [軟體架構之Ｃ4模型](https://blog.myctw.cc/post/d11.html)
- [ ] [Making C4-Model in Software Architecture](https://medium.easyread.co/c4-model-in-software-architecture-6587ab4a2d0f)
- [ ] [Example Component Diagram](https://structurizr.com/help/component-diagram)
- [ ] [[Other][Tools]畫軟體系統圖- C4 Model 軟體系統建模的圖形表示技巧](https://stevenjhu.com/2022/04/28/othertools%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%95%AB%E5%9C%96-c4-model-%E8%BB%9F%E9%AB%94%E7%B3%BB%E7%B5%B1%E5%BB%BA%E6%A8%A1%E7%9A%84%E5%9C%96%E5%BD%A2%E8%A1%A8%E7%A4%BA%E6%8A%80%E5%B7%A7/)

# Concept  
- 用來描述軟體架構的概念
- 架構圖的視野由高至低分為四個等級，第一等級是最上層也是最粗略的。
- 主要有 4 層，像地圖一樣可以縮放，可以給不同的人看自己想關注的部分，一般可做前三層即可
- 低層的架構圖應顯示特定模組的細節，而高層的架構圖應隱藏細節，提供較宏觀的概覽
- C4 模型是軟體系統建模的圖形表示技巧。同時市面上還有其他的工具、做法方式，比較知名的就是 UML、ArchiMate 和 SysML，但是 UML ..這類本身過於複雜，說實話，9成的人看圖都只是看個大概而已，過於複雜的圖難以傳承以外，耗時又耗力，所以基本上大部分的狀況下是不需要過於複雜的圖形表示，可能只要線和盒子就好。故 C4Model 就是一個很好的呈現方式。

![C4Model why 4 layers.png](http://192.168.25.60:8000/files/file_storage/5fca3ff2.png)

## 1. 系統情境圖 ( System Context Diagram )
- 系統傳達給 user 的價值所在
- 這個階層主要是將各種使用者/角色需要使用的功能畫出來，並不會有技術名詞或實作的相關做法，可以想像成 User story 的做法，將使用者的需求簡易的描述出來，跟哪些系統有關聯
### 範圍
單一軟件系統。
### 主要元素
範圍內的軟件系統。
### 支援元素
在範圍內直接連接到軟件系統的人員（例如用戶、參與者、角色或角色）和軟件系統（外部依賴項）。官網建議是把這次專案要開發的系統放在中間，以藍色的方塊來表示；灰色則是既有系統或非本專案需開發系統，再用虛線將系統界線畫出來。
### 目標受眾
軟件開發團隊內外的所有人，包括技術人員和非技術人員。
### 推薦給大多數團隊
是的。

## 2. 容器圖 ( Container Diagram )
- 放大系統後的容器可以是網頁應用程式、桌面應用程式、Ａpp、資料庫等。在容器圖內可以看到各個應用程式（模組）間的相互溝通
- 並非像 Docker 之類的 container
- 放大系統後的容器可以是網頁應用程式、桌面應用程式、Ａpp、資料庫等
- 在容器圖內可以看到各個應用程式（模組）間的相互溝通
- 可單獨部屬
### 範圍
單一軟件系統。
### 主要元素
軟件系統範圍內的容器。
### 支援元素
直接連接到容器的人員和軟件系統。
### 目標受眾
軟件開發團隊內外的技術人員；包括軟件架構師、開發人員和運營/支援人員。
### 推薦給大多數團隊
是的。
### 注意
此圖沒有說明部署方案、叢集、複製、故障轉移等。

## 3. 元件圖 ( Component Diagram )
- 第三階段的圖其實就是再放大 Lv2 的應用程式，將應用程式內容更深入地畫出每個元件。
- 描述各模組相互溝通的詳細邏輯
- 不可單獨部屬
### 範圍
單個容器。
### 主要元素
範圍內容器內的組件。
### 支援元素
容器（在範圍內的軟件系統內）加上直接連接到組件的人員和軟件系統。
### 目標受眾
軟件架構師和開發人員。
### 推薦給大多數團隊
不，僅當您認為它們增加了價值時才創建組件圖，並考慮為長期文檔自動創建它們。

## 4. 程式 ( Code )
- 第四層用在特別的決策圖即可，可以表示什麼樣的條件該走什麼路。
### 範圍
單個組件。
### 主要元素
範圍內組件內的代碼元素（例如類、介面、對象、函數、數據庫表等）。
### 目標受眾
軟件架構師和開發人員。
### 推薦給大多數團隊
不，只要儲存在長期文檔，大多數IDE可以按需求生成。

# Roles

## 1. 每一個符號代表的意義不同 : 每個元素都要有名稱和簡短的描述
- Person、Software System、Container、Component
- Container 與 Component 要標明使用的技術
## 2. 同一類型的用虛線框起來，再輔以箭頭表示先後順序性
## 3. 使用單向箭頭，並描述清楚


# Example
[資訊看板系統](http://192.168.25.60:9005/zh-tw/專案文件/資訊看板/C4Model)

```diagram
PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIyNDFweCIgaGVpZ2h0PSI0NDFweCIgdmlld0JveD0iLTAuNSAtMC41IDI0MSA0NDEiIGNvbnRlbnQ9IiZsdDtteGZpbGUgaG9zdD0mcXVvdDtlbWJlZC5kaWFncmFtcy5uZXQmcXVvdDsgbW9kaWZpZWQ9JnF1b3Q7MjAyMi0wNS0xMVQwMToxMjoxNC43MzJaJnF1b3Q7IGFnZW50PSZxdW90OzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTAwLjAuNDg5Ni4xMjcgU2FmYXJpLzUzNy4zNiZxdW90OyBldGFnPSZxdW90O0t4TkwwVGN5SG5jRE94alpRSmZqJnF1b3Q7IHZlcnNpb249JnF1b3Q7MTguMC4yJnF1b3Q7IHR5cGU9JnF1b3Q7ZW1iZWQmcXVvdDsmZ3Q7Jmx0O2RpYWdyYW0gaWQ9JnF1b3Q7dWc4WjRTc1Y4em9CZkk0MDlhbmImcXVvdDsgbmFtZT0mcXVvdDtQYWdlLTEmcXVvdDsmZ3Q7N1pkTms5c29FSVovRGNlZGt0Q0hwYU5sYXlhSDdOWldlYXV5T1dLSmtjaklRa0Y0Yk8ydjN3YURoU3pGTlpOY1VxbTRQQjU0Nlc2Z2FSN1pLTmdjemsrQ2RQV2Z2S1FOd2w1NVJzRVdZZXlIR0NQMTlzcmhvcXhpSTFTQ2xjWm9GSGJzUDJwRXo2aEhWdEorWWlnNWJ5VHJwbUxCMjVZV2NxSVJJZmhwYXZiTW0rbXNIYW5vVE5nVnBKbXJuMWdwNjR1YTROV29mNkNzcXUzTWZweGVSZzdFR3B1ZDlEVXArY21SZ2h3Rkc4RzV2TFFPNXcxdFZQSnNYaTUrajk4WXZTNU0wRmEreVNFMDY1Q0QzUnd0WWErbXk0V3NlY1ZiMHVTam1nbCtiRXVxSW5qUUcyMCtjdDZCNklQNGhVbzVtSU1qUjhsQnF1V2hNYVAwek9TL3l2MGhNcjNQenNqMmJDTHJ6dUIwL3FhQ0hhaWt3bXF0RklNVFNIVS91Mk5qS04wYjNONXRzSkwwdGQ2VVdzYzhqeWExUFQrS3dwYUJxVnBKUkVXdFdYRFJWQllkUjVQOUo4cGhTakdBZ2FBTmtleDFXbEhFRkdaMXRSdlBEaHJtK0hTWDc3K28wb1pGTnFTZ05aUXdGVGZWSC81RkRpWSt5a09VSlNqeFVBNmZDVnB2dExKRjJTUEtWeWdOMFRyUlF4NUtJdXYrejlBWmQ4aFZ6MXVyYjJsZkNOWkpCcEtKSGlrM0ZSUWFqMm9tbzZ4UW5xSWswTkVqbEVMRFY0MXNoZFptbW9ic2FXUEM0TGlCTkdiUHZKV1Rtb3kvSHJrZCtLUFhWYlVHQXovdXp1TWd0Q3J6WDBmWmowSmtVb0VqT3dqSjNOODZnSGFaZVNxWDdQVXFSWmRnT2pFUUxObzZ2cTZkWFlLNEYreTl1L1h2N2RaRUtYakR4U1FLd2tHaFgwdSswZlF3Si9sWnlzWHROckdMRXV3VXVzR01neFhuK3F2SWhnMis3OTQ4ZFExUE5aTzA3NGkrWkNkNGZpZ0gxalNiNjg0Q0x3a2VWK3JDOTFMd0YrcU94SUVmYmN3VWp2NnNYOHFqSnJxbUQrZEtQWm9laXZDaDA3VU5LODlJd3lwVjBRVmNlb1dGRE80Z3lVc216Ym83emxxcDcxaWtTa0ZCQjI4OC9hY3FZUU9hcjNwR24ycXJxV2dFLzBaYzB2Q0N1Qmh5T2plOEFkVVVDb2pzOVNGNDk3ajJTb1drNTd2RU1xT0JaNTVkZ3oxMzB6K05qMEpzYldyM01aaDQ3NlljZEEzb3ZndDZLMFdhZEczcEI0MFlKYW5pa09MVFZ0TUliQUtVWmJvQlpQTG45UHRFOXp1b0RBWVh4TnNOdmFTSE95U01GUUJUVDArWm96VDdUall1TEhURzY5LzgvS1g0R2R6bDUvaWx5N2VVM0UwcDZSQldGMFZHaXBkS3Uxa1N0cnlsYzV6Nlh1eG4zaDFvenJoSVJHSDU3UzFpZUJ0NXFUOEg2QzJOWmtERmM2SXVVZmFLdmpsbThSSjdmd29lT3hxZVF2cHQzenpmVG1pY1RBa2RoZ3VFRHBjSWpYK1kwTkFkZjcxb1UrYzNZSkQvRHc9PSZsdDsvZGlhZ3JhbSZndDsmbHQ7L214ZmlsZSZndDsiPjxkZWZzLz48Zz48cGF0aCBkPSJNIDEyMCAxODAgTCAxMjAgMzEzLjYzIiBmaWxsPSJub25lIiBzdHJva2U9InJnYigwLCAwLCAwKSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIzIDMiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDEyMCAzMTguODggTCAxMTYuNSAzMTEuODggTCAxMjAgMzEzLjYzIEwgMTIzLjUgMzExLjg4IFoiIGZpbGw9InJnYigwLCAwLCAwKSIgc3Ryb2tlPSJyZ2IoMCwgMCwgMCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxlbGxpcHNlIGN4PSIxMjAiIGN5PSI0MC41IiByeD0iNDAuNSIgcnk9IjQwLjUiIGZpbGw9IiMwODNmNzUiIHN0cm9rZT0iIzA2MzE1YyIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxwYXRoIGQ9Ik0gMjAgMTA1LjMgQyAyMCA4Mi45MyAzOC4xMyA2NC44IDYwLjUgNjQuOCBMIDE3OS41IDY0LjggQyAyMDEuODcgNjQuOCAyMjAgODIuOTMgMjIwIDEwNS4zIEwgMjIwIDEzOS41IEMgMjIwIDE2MS44NyAyMDEuODcgMTgwIDE3OS41IDE4MCBMIDYwLjUgMTgwIEMgMzguMTMgMTgwIDIwIDE2MS44NyAyMCAxMzkuNSBaIiBmaWxsPSIjMDgzZjc1IiBzdHJva2U9IiMwNjMxNWMiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxlbGxpcHNlIGN4PSIxMjAiIGN5PSI0MC41IiByeD0iNDAuNSIgcnk9IjQwLjUiIGZpbGw9IiMwODNmNzUiIHN0cm9rZT0iIzA2MzE1YyIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxcHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTIzcHg7IG1hcmdpbi1sZWZ0OiAxMjBweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogI2ZmZmZmZjsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMXB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm93cmFwOyI+PGZvbnQgc3R5bGU9ImZvbnQtc2l6ZTogMTZweCI+PGI+5LiA6Iis5L2/55So6ICFPC9iPjwvZm9udD48ZGl2PltQZXJzb25dPC9kaXY+PGJyIC8+PGRpdj48Zm9udCBzdHlsZT0iZm9udC1zaXplOiAxMXB4Ij48Zm9udCBjb2xvcj0iI2NjY2NjYyI+5YWs5Y+45YWn6YOo5ZOh5belPC9mb250PjwvZm9udD48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTIwIiB5PSIxMjYiIGZpbGw9IiNmZmZmZmYiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTFweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5LiA6Iis5L2/55So6ICFW1BlcnNvbl0uLi48L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjAiIHk9IjMyMCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxMjAiIHJ4PSIxMiIgcnk9IjEyIiBmaWxsPSIjMTA2MWIwIiBzdHJva2U9IiMwZDUwOTEiIHN0cm9rZS1kYXNoYXJyYXk9IjMgMyIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3QgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAyMzhweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAzODBweDsgbWFyZ2luLWxlZnQ6IDFweDsiPjxkaXYgZGF0YS1kcmF3aW8tY29sb3JzPSJjb2xvcjogI2ZmZmZmZjsgIiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBvdmVyZmxvdy13cmFwOiBub3JtYWw7Ij48Zm9udCBzdHlsZT0iZm9udC1zaXplOiAxNnB4Ij48Yj7nt5rkuIrmiZPljaHns7vntbE8L2I+PC9mb250PjxkaXY+W1dlYlNpZ25pbiBTeXN0ZW1dPC9kaXY+PGJyIC8+PGRpdj48Zm9udCBzdHlsZT0iZm9udC1zaXplOiAxMXB4Ij48Zm9udCBjb2xvcj0iI2NjY2NjYyI+5o+Q5L6b5YWs5Y+45YWn6YOo5ZOh5bel5omT5Y2h5L2/55SoPC9mb250PjwvZm9udD48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTIwIiB5PSIzODQiIGZpbGw9IiNmZmZmZmYiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+57ea5LiK5omT5Y2h57O757WxW1dlYlNpZ25pbiBTeXN0ZW1dLi4uPC90ZXh0Pjwvc3dpdGNoPjwvZz48L2c+PHN3aXRjaD48ZyByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiLz48YSB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLC01KSIgeGxpbms6aHJlZj0iaHR0cHM6Ly93d3cuZGlhZ3JhbXMubmV0L2RvYy9mYXEvc3ZnLWV4cG9ydC10ZXh0LXByb2JsZW1zIiB0YXJnZXQ9Il9ibGFuayI+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMHB4IiB4PSI1MCUiIHk9IjEwMCUiPlRleHQgaXMgbm90IFNWRyAtIGNhbm5vdCBkaXNwbGF5PC90ZXh0PjwvYT48L3N3aXRjaD48L3N2Zz4=
```














